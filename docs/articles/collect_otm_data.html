<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="throne">
<title>Collect and process OTM data • throne</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Collect and process OTM data">
<meta property="og:description" content="throne">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">throne</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/overview.html">Overview</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-field-workflow">Field workflow</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-field-workflow">
    <a class="dropdown-item" href="../articles/collect_n_process_thermal_images.html">Collect and process thermal images</a>
    <a class="dropdown-item" href="../articles/collect_otm_data.html">Collect OTM data</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-r-workflow">R Workflow</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-r-workflow">
    <a class="dropdown-item" href="../articles/rnp_flights_data.html">Reading and processing flight data</a>
    <a class="dropdown-item" href="../articles/rnp_otms_data_gen_otm_splines.html">Reading and processing OTM data + Generating OTM splines</a>
    <a class="dropdown-item" href="../articles/correct_flights_data.html">Correct flight data</a>
    <a class="dropdown-item" href="../articles/predict_thermal_landscapes.html">Match data and predict thermal landscapes</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/example.html">Case study</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ggcostoya/throne">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Collect and process OTM data</h1>
            
      
      
      <div class="d-none name"><code>collect_otm_data.Rmd</code></div>
    </div>

    
    
<style>
p.caption {
  font-size: 0.9em;
}
</style>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>In this vignette our goal is to present the co-first step of the
workflow presented in the <code>throne</code> package, the collection of
<strong>operative temperature model</strong> (<strong>OTM</strong>)
data.To collect this data we will need to 1) build, 2) program, 3)
deploy and 4) read the measurements collected by the OTM. Here, we will
provide some general guidelines on how to perform each of these steps
such that they integrate adequately with the software developed for the
<code>throne</code> package. In the context of the whole package’s
workflow, we highlight the areas covered in this vignette below:</p>
<div class="figure" style="text-align: center">
<img src="images/otm_setup_workflow.png" alt="Part of the workflow covered in this vignette" width="100%"><p class="caption">
Part of the workflow covered in this vignette
</p>
</div>
</div>
<div class="section level2">
<h2 id="building-otms">Building OTMs<a class="anchor" aria-label="anchor" href="#building-otms"></a>
</h2>
<p>Typically, an OTM is the sum of two components; a body and a
temperature logger which is contained inside of the body. The physical
properties of the body of the OTM will determine its internal
temperature which in turn will be captured by the temperature logger.
The goal when building an OTM’s body is that it matches the biophysical
properties of the organism of interest as accurately as possible such
that the temperature measured by the logger closely matches that which
the organism would experience if it were on the exact spot where that
OTM is deployed. This is the concept of <strong>operative
temperature</strong>. To that end, it is recommended that the body is of
a similar volume, mass and color of the organism of interest to ensure
that properties such conduction and convection and radiative heat
transfer are comparable. Many techniques have been employed over the
years to achieve a body of such characteristics. For instance, among
studies of terrestrial ectotherms (for which OTMs are commonly used),
copper pipes were historically considered to be an accurate analog to
many organisms. However, as part of a separate study, we showed that 3D
printing can surpass the performance of copper pipes at a fraction of
the cost. We strongly recommend 3D printing to build OTM bodies as we
detail in <a href="https://www.sciencedirect.com/science/article/pii/S0306456523003030" class="external-link">Alujević
et al. 2024</a>. As an example, below is a picture of the OTM bodies we
used for this study:</p>
<div class="figure" style="text-align: center">
<img src="images/otm_model.png" alt="An operative temperature model (OTM) used for this study" width="80%"><p class="caption">
An operative temperature model (OTM) used for this study
</p>
</div>
<p>The second component of an OTM is the temperature logger. We
recommend using iButton temperature loggers. For this study, we used the
<a href="https://www.embeddeddatasystems.com/Thermochrons-Hygrochron_c_29.html" class="external-link">thermocron
DS1921G-F5#</a> from Embedded data systems at ~ 50 US Dollars / unit
(down to 40 US Dollar / unit if they are ordered in bulk). Other models
are available at similar prices so we leave it up to the user to make
their own choice. Nonetheless, when choosing a temperature logger model
we recommend considering:</p>
<ol style="list-style-type: decimal">
<li>That the temperature logger has a <strong>temperature range</strong>
that encompasses of the typical range of temperatures that occur in the
area of interest.</li>
<li>That it has as high recording accuracy. For example, a logger that
can record temperature changes at 0.1 C intervals would be more accurate
than one that can only record temperature changes at 1 C intervals.</li>
<li>That it has a a thermal resolution that is relevant for the study.
For example, an iButton that can only record temperature changes at 10 C
intervals would not be optimal when studying micro climatic variation in
the order of a few C, but an temperature logger with a resolution of of
0.5 - 1 C might suffice.</li>
<li>That the temperature logger can store a <strong>number of
readings</strong> at a <strong>frequency</strong> that is adequate for
the study. Ideally OTMs will be deployed in the field for longer periods
of time so the user will need to consider the trade-off between a
logging frequency that is relevant to capture the thermal fluctuations
of the environment and the number of readings the logger can store at
that logging frequency.</li>
</ol>
</div>
<div class="section level2">
<h2 id="programming-temperature-loggers">Programming temperature loggers<a class="anchor" aria-label="anchor" href="#programming-temperature-loggers"></a>
</h2>
<p>Before the OTM is deployed in the field, the temperature logger it
contains must be programmed. Programming temperature loggers might be
specific to logger brand and model. In our case, program an iButton 3
things are needed, 1) a <strong>reader</strong> to be able to read and
transfer data to and from the iButton, 2) an <strong>adapter</strong>
that can transmit information from the reader to a computer and 3) a
<strong>processing software</strong> from which instructions and data
can be inputed and retrieved. For each of these purposes we used the <a href="https://www.ibuttonlink.com/products/ds1402d-dr8" class="external-link">DS1402D-DR8 +
iButton Reader</a> and the <a href="https://www.ibuttonlink.com/products/ds9490b" class="external-link">DS9490B# USB 1-Wire
Adapter</a> by iButtonlink and the software <a href="https://www.analog.com/en/resources/evaluation-hardware-and-software/1-wire-sdks/download-1wire-ibutton-drivers.html" class="external-link">OneWireViewer</a>
by Analog Devices. Other hardware and software could be used if the same
outcome is achieved but we strongly recommend using
<strong>OneWireViewer</strong> from the software front as it is
<strong>completely free</strong>. In that spirit, below we offer a short
step by step tutorial on how to programm iButtons using this software
which we also present in a <code>GIF</code> below:</p>
<ol style="list-style-type: decimal">
<li>Download OneWireViewer. An instructional video on how to get started
can be found <a href="https://www.analog.com/en/resources/media-center/videos/6313216031112.html" class="external-link">here</a>.
Note that the software is a Java-based applet, so <a href="https://www.java.com/en/download/" class="external-link">Java</a> will need to be
installed before proceeding.</li>
<li>Connect the adapter to the reader.</li>
<li>Insert the iButton reader into an available USB-port. If the
software is launched for the first time, a USB port will need to be
selected. Choose a USB-port from the drop-down list if prompted.</li>
<li>Insert an iButton into the reader. If the iButton is working it will
appear as a device with a serial number in the software’s left window
panel; if the iButton does not show up then it is likely unusable or
malfunctioning.</li>
<li>Select the iButton in the list of devices on the left, and go to the
“Thermochron” tab.</li>
<li>Click “Start new mission” to start programming the iButton.</li>
<li>Check the box that says “Synchronize Real-time Clock”. This will
make sure the iButton’s internal real-time clock is synchronized with
the time on the PC that is being used for programming.</li>
<li>Enter the “Sampling Rate”, in minutes.</li>
<li>Enter “Mission Start Delay”, which will be the time before the first
data sample will be collected. Note that this is in <em>minutes</em>;
for example, for a 24h delay in recording the delay will need to be of
1440 minutes.</li>
<li>Do <strong>not</strong> “Enable Rollover” unless you want your data
to be overwritten once the memory is full.</li>
<li>Click “OK”. The line reading “Is Mission Active?” should change from
“False” to “True” within a second or two. It will also display “First
sample not yet collected”.</li>
<li>Insert the iButton inside the OTM ensuring that an air-tight,
water-proof seal is achieved and the OTM is ready to be deployed in the
field.</li>
</ol>
<div class="figure" style="text-align: center">
<img src="images/otm_setup_onewireviewer.gif" alt="Step-by-step process on how to program an iButton using the OneWireViewer software"><p class="caption">
Step-by-step process on how to program an iButton using the
OneWireViewer software
</p>
</div>
<blockquote>
<p><strong>NOTE</strong>: It will be up to the user to figure out the
math related to the sampling rate which will be dependent on the
iButton’s storing capacity (i.e., the number of readings it can hold).
Often, the need to record temperatures over a long period of time
minimizes the number of observations within a given day. To that end, we
recommend that, if multiple OTMs are to be deployed, that their “Mission
Start Delay” is modified accordingly such that there is a certain degree
of staggering in the measurements they record. Say that we are
interested in recording daily thermal fluctuations for a period of
multiple months such that the minimum sampling rate we can afford is 2h.
In that case we would recommend splitting OTMs into two groups one with
a “Mission Start Delay” of 1440 minutes and another with 1500 such that
the eventual recordings are staggered by 60 minutes.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="deploying-otms-in-the-field">Deploying OTMs in the field<a class="anchor" aria-label="anchor" href="#deploying-otms-in-the-field"></a>
</h2>
<p>Once OTMs are programmed the next step is to deploy them in the
field. As a general rule we recommend deploying the maximum number of
OTMs possible within budget constraints. A greater number of OTMs will
enable the capture of a greater number of thermal microhabitats which
will be crucial in subsequent steps of the <code>throne</code> package.
In addition, we recommend <strong>informed as opposed to random
deployment</strong> throughout the area of study to minimize the degree
of overlap in the information provided by each logger. To achieve
informed deployment, we recommend the following:</p>
<ol style="list-style-type: decimal">
<li>Become familiar with your area of study to identify general
microhabitat types to target as well as daily temperature fluctuations.
A key point here is identifying the general orientation of your study
site which will determine the incidence of the sun.</li>
<li>Deploy OTMs evenly across all microhabitats and surfaces with
different orientations within your site.</li>
<li>If possible, add replicates for each but if the number of possible
replicates is limited, favor microhabitats that are more represented in
your area of study.</li>
</ol>
</div>
<div class="section level2">
<h2 id="reading-ibutton-data">Reading iButton data<a class="anchor" aria-label="anchor" href="#reading-ibutton-data"></a>
</h2>
<p>The last step of the process will be to recover the OTMs from the
field and read the data collected by the iButtons. The reading process
is very similar to the programming with steps 2-4 above being the same.
Below we offer yet another small tutorial on how to fully read and
download this data which we also show as a <code>GIF</code> (Figure
4):</p>
<ol style="list-style-type: decimal">
<li>Select the iButton in the software’s left window pane.</li>
<li>Navigate to the “Thermocron” tab, then “Temperatures”.</li>
<li>The reader will take a second to display in a graph of the
temperatures plotted over time. Once the graph shows up, right-click
anywhere within the graph window for a drop-down menu to appear.</li>
<li>Select <strong>“Save Data to <code>.csv</code> File”</strong> and
save the file in a directory within your computer. Keep track of this
directory as its direction will be the input of subsequent
<code>R</code> functions as part of the <code>throne</code>
<code>R</code> workflow.</li>
</ol>
<blockquote>
<p><strong>NOTE</strong>: The data will remain on the iButton until it
is programmed anew. Once you start a new mission, the old mission data
will be lost, so we strongly(( recommend to make sure all data has been
correctly downloaded before re-deployment.</p>
</blockquote>
<div class="figure" style="text-align: center">
<img src="images/otm_setup_onewireviewer2.gif" alt="Step-by-step process on how to read data logged by an iButton using the OneWireViewer software" width="80%"><p class="caption">
Step-by-step process on how to read data logged by an iButton using the
OneWireViewer software
</p>
</div>
<div class="section level3">
<h3 id="note-on-links-to-commercial-sites">Note on links to commercial sites<a class="anchor" aria-label="anchor" href="#note-on-links-to-commercial-sites"></a>
</h3>
<p>Although we include links to multiple commercial sites throughout
this vignette, we do not have any financial interest in recommending any
particular product to users of <code>throne</code>. The devices and
software we list here is what worked for our purposes and what we know
how to us.</p>
<p>Next we will move on to the <code>R</code> workflow of the
<code>throne</code> package, starting with how to read and process
<code>.tif</code> files obtained via aerial photogrammetry.</p>
<nav aria-label="Page navigation"><ul class="pagination justify-content-end">
<li class="page-item">
<a class="page-link" href="collect_n_process_thermal_images.html">Previous:
Collect and process thermal imagery</a>
</li>
<li class="page-item">
<a class="page-link" href="rnp_flights_data.html">Next: Read and process
flights data</a>
</li>
</ul></nav>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Karla Alujević, Guillermo Garcia-Costoya, Noa Ratia, Emma Schmitz, Russell D. Godkin, Jelena Bujan, Akhila C. Gopal, Michael Logan.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>

<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="throne">
<title>Correcting flight data • throne</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Correcting flight data">
<meta property="og:description" content="throne">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">throne</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/overview.html">Overview</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-field-setup">Field setup</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-field-setup">
    <a class="dropdown-item" href="../articles/flying_and_collecting_data_from_drones.html">Drones</a>
    <a class="dropdown-item" href="../articles/otms.html">OTMs</a>
  </div>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-r-workflow">R Workflow</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-r-workflow">
    <a class="dropdown-item" href="../articles/rnp_flights_data.html">Reading and processing flight data</a>
    <a class="dropdown-item" href="../articles/rnp_otms_data_gen_otm_splines.html">Reading and processing OTM data</a>
    <a class="dropdown-item" href="../articles/correcting_flight_data.html">Correcting flight data</a>
    <a class="dropdown-item" href="../articles/predicting_thermal_landscapes.html">Predicting thermal landscapes</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Correcting flight data</h1>
            
      
      
      <div class="d-none name"><code>correcting_flight_data.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>In this vignette, our aim is to illustrate how to correct temperature
data obtained using thermal photogrammetry. By correcting, we are
referring to the process of transforming the temperature measurements
made via the IR cameras mounted into the drone into <strong>operative
temperatures</strong> as measured using an operative temperature model
(OTM).</p>
<p>The need from this correction stems from the fundamental difference
between temperature estimates made using an IR camera and those made by
making physical contact with an object. This is because the IR camera
measurement is influenced by a wide range of factors including the
object’s emissivity, the conditions in which the image is taken (ambient
temperature, amount of light etc. see <a href="https://besjournals.onlinelibrary.wiley.com/doi/full/10.1111/2041-210X.13563" class="external-link">Playà-Montmany
&amp; Tattersall 2021</a> for further details).</p>
<p>In contrast, OTMs are designed to record temperature measurements
that match the internal body temperature of the organism as closely as
possible. This is achieved by enclosing a temperature logger (e.g., an
Eye Button) inside of a structure of a similar size and with similar
surface properties to the the organism of interest. This methodology has
been used extensively in the field of thermal ecology and recent
advances have minimized the costs of production and maximized the
accuracy of OTMs (see our past work in <a href="https://www.sciencedirect.com/science/article/pii/S0306456523003030%5D" class="external-link">Alujević
et al. 2024</a>).</p>
<p>Due to the above, the IR camera of the drone and the OTM will
ultimately record fundamentally different temperature metrics. For the
thermal measurements estimated using the drone to be truly
representative of what the organism is experiencing, they must be
corrected such that they instead describe operative temperatures.</p>
<p>To transform temperature measurements obtained using a drone-mounted
IR camera into operative temperature measurements, the
<code>throne</code> R package performs a double correction:</p>
<ol style="list-style-type: decimal">
<li><p>It corrects for date and time of the day to account for the
differences in light conditions across seasons and throughout a
day.</p></li>
<li><p>It corrects for the temperature value itself as to account for
the differences in temperature measurements caused by the inherent
biases associated with an IR measurement.</p></li>
</ol>
<p>Next, we will introduce how this corrections are implemented using
via 3 functions within the <code>R</code> package.
(<code>gen_correction_data</code>, <code>get_correction_factors</code>
and <code>apply_correction</code>). We will start by presenting how to
build data to inform the correction, how to estimate the factors that
will guide the correction and lastly how the correction will be
implemented into a flight data set. Below is an image of what is covered
in this vignette within the overall context of the <code>throne</code>
package workflow.</p>
</div>
<div class="section level2">
<h2 id="building-a-correction-data-frame">Building a correction data frame<a class="anchor" aria-label="anchor" href="#building-a-correction-data-frame"></a>
</h2>
<p>The first step is to construct a data frame (or <code>tibble</code>)
from which the how the flight data needs to be corrected.To perform this
correction we will use the <code>gen_corr_data</code> function, which
will take in as arguments:</p>
<ol style="list-style-type: decimal">
<li><p><code>flight</code>: A flight <code>tibble</code> with metadata
generated using the functions <code>rnp_flight_data</code> and
<code>add_flight_metadata</code>. It is <strong>essential that the
metadata of the flight includes the date when the flight happened (as a
DOY or Julian date) and the minute of the day when the flight started
and when the flight ended</strong>.</p></li>
<li><p><code>splines</code>: A complex <code>tibble</code> of OTM spline
models obtained using the <code>gen_otm_splines</code> function. It is
also essential that each OTM spline model contains information on the
date and on the latitude and longitude of the OTM itself.</p></li>
</ol>
<p>The <code>gen_corr_data</code> function will then:</p>
<ol style="list-style-type: decimal">
<li><p>Select the tiles of the flight data (i.e., latitude and longitude
combinations) that had an OTM.</p></li>
<li><p>Filter among all available OTM splines for the ones that occurred
in the same date as the flight of interest.</p></li>
<li><p>Using the spline models estimate the average temperature
estimated by the OTM for the period between the start and the end of the
flight.</p></li>
<li><p>Merge the predictions made using the spline models with the
filtered data from the flight to finally return a <code>tibble</code>
with matched observations like the one below:</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="getting-correction-factors">Getting correction factors<a class="anchor" aria-label="anchor" href="#getting-correction-factors"></a>
</h2>
<p>By running a simple linear regression, we can see that IR and
operative temperatures are positively correlated</p>
</div>
<div class="section level2">
<h2 id="applying-corrections">Applying corrections<a class="anchor" aria-label="anchor" href="#applying-corrections"></a>
</h2>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by The package maintainer.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
